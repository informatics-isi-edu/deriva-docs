

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>DataPath :: Data Update Example &mdash; deriva-py 5.8 documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> deriva-py
          

          
          </a>

          
            
            
              <div class="version">
                5.8
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">API Guides</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="README.html">DataPath</a><ul>
<li class="toctree-l2"><a class="reference internal" href="README.html#features">Features</a></li>
<li class="toctree-l2"><a class="reference internal" href="README.html#limitations">Limitations</a></li>
<li class="toctree-l2"><a class="reference internal" href="README.html#tutorials">Tutorials</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="README.html#ermrest-model-management">ERMrest Model Management</a><ul>
<li class="toctree-l2"><a class="reference internal" href="README.html#features">Features</a></li>
<li class="toctree-l2"><a class="reference internal" href="README.html#limitations">Limitations</a></li>
<li class="toctree-l2"><a class="reference internal" href="README.html#examples">Examples</a><ul>
<li class="toctree-l3"><a class="reference internal" href="README.html#add-table-to-schema">Add Table to Schema</a></li>
<li class="toctree-l3"><a class="reference internal" href="README.html#add-a-vocabulary-term-table">Add a Vocabulary Term Table</a></li>
<li class="toctree-l3"><a class="reference internal" href="README.html#add-column-to-table">Add Column to Table</a></li>
<li class="toctree-l3"><a class="reference internal" href="README.html#remove-a-column-from-a-table">Remove a Column from a Table</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="README.html#ermrestcatalog">ErmrestCatalog</a><ul>
<li class="toctree-l2"><a class="reference internal" href="README.html#catalog-binding">Catalog Binding</a></li>
<li class="toctree-l2"><a class="reference internal" href="README.html#client-credentials">Client Credentials</a></li>
<li class="toctree-l2"><a class="reference internal" href="README.html#high-level-api-factories">High-Level API Factories</a></li>
<li class="toctree-l2"><a class="reference internal" href="README.html#low-level-http-methods">Low-Level HTTP Methods</a></li>
<li class="toctree-l2"><a class="reference internal" href="README.html#http-caching">HTTP Caching</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">API Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="api/deriva.html">deriva package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="api/deriva.html#subpackages">Subpackages</a><ul>
<li class="toctree-l3"><a class="reference internal" href="api/deriva.config.html">deriva.config package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="api/deriva.config.html#submodules">Submodules</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/deriva.config.html#module-deriva.config.acl_config">deriva.config.acl_config module</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/deriva.config.html#module-deriva.config.annotation_config">deriva.config.annotation_config module</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/deriva.config.html#module-deriva.config.base_config">deriva.config.base_config module</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/deriva.config.html#module-deriva.config.dump_catalog_annotations">deriva.config.dump_catalog_annotations module</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/deriva.config.html#module-deriva.config">Module contents</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="api/deriva.core.html">deriva.core package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="api/deriva.core.html#subpackages">Subpackages</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/deriva.core.html#submodules">Submodules</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/deriva.core.html#module-deriva.core.base_cli">deriva.core.base_cli module</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/deriva.core.html#module-deriva.core.datapath">deriva.core.datapath module</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/deriva.core.html#module-deriva.core.deriva_binding">deriva.core.deriva_binding module</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/deriva.core.html#module-deriva.core.deriva_server">deriva.core.deriva_server module</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/deriva.core.html#module-deriva.core.ermrest_catalog">deriva.core.ermrest_catalog module</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/deriva.core.html#module-deriva.core.ermrest_config">deriva.core.ermrest_config module</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/deriva.core.html#module-deriva.core.ermrest_model">deriva.core.ermrest_model module</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/deriva.core.html#module-deriva.core.hatrac_cli">deriva.core.hatrac_cli module</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/deriva.core.html#module-deriva.core.hatrac_store">deriva.core.hatrac_store module</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/deriva.core.html#module-deriva.core.polling_ermrest_catalog">deriva.core.polling_ermrest_catalog module</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/deriva.core.html#module-deriva.core">Module contents</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="api/deriva.transfer.html">deriva.transfer package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="api/deriva.transfer.html#subpackages">Subpackages</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/deriva.transfer.html#module-deriva.transfer">Module contents</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="api/deriva.html#module-deriva">Module contents</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Command Line Interfaces</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="cli/deriva-acl-config.html">deriva-acl-config</a><ul>
<li class="toctree-l2"><a class="reference internal" href="cli/deriva-acl-config.html#using-deriva-acl-config-to-configure-acls">Using deriva-acl-config to configure ACLs</a></li>
<li class="toctree-l2"><a class="reference internal" href="cli/deriva-acl-config.html#config-file-format">Config file format</a><ul>
<li class="toctree-l3"><a class="reference internal" href="cli/deriva-acl-config.html#the-groups-stanza">The groups stanza</a></li>
<li class="toctree-l3"><a class="reference internal" href="cli/deriva-acl-config.html#the-group-list-table-stanza">The group_list_table stanza</a></li>
<li class="toctree-l3"><a class="reference internal" href="cli/deriva-acl-config.html#the-acl-definitions-stanza">The acl_definitions stanza</a></li>
<li class="toctree-l3"><a class="reference internal" href="cli/deriva-acl-config.html#the-acl-bindings-stanza">The acl_bindings stanza</a></li>
<li class="toctree-l3"><a class="reference internal" href="cli/deriva-acl-config.html#the-catalog-acls-stanza">The catalog_acls stanza</a></li>
<li class="toctree-l3"><a class="reference internal" href="cli/deriva-acl-config.html#the-schema-acls-stanza">The schema_acls stanza</a></li>
<li class="toctree-l3"><a class="reference internal" href="cli/deriva-acl-config.html#the-table-acls-stanza">The table_acls stanza</a></li>
<li class="toctree-l3"><a class="reference internal" href="cli/deriva-acl-config.html#the-column-acls-stanza">The column_acls stanza</a></li>
<li class="toctree-l3"><a class="reference internal" href="cli/deriva-acl-config.html#the-foreign-key-acls-stanza">The foreign_key_acls stanza</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="cli/deriva-acl-config.html#security-considerations">Security Considerations</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="cli/deriva-annotation-config.html">deriva-annotation-config</a><ul>
<li class="toctree-l2"><a class="reference internal" href="cli/deriva-annotation-config.html#using-deriva-annotation-config-to-configure-annotations">Using deriva-annotation-config to configure annotations</a></li>
<li class="toctree-l2"><a class="reference internal" href="cli/deriva-annotation-config.html#config-file-format">Config file format</a><ul>
<li class="toctree-l3"><a class="reference internal" href="cli/deriva-annotation-config.html#the-known-attributes-stanza">The <code class="docutils literal notranslate"><span class="pre">known_attributes</span></code> stanza</a></li>
<li class="toctree-l3"><a class="reference internal" href="cli/deriva-annotation-config.html#the-schema-annotations-stanza">The schema_annotations stanza</a></li>
<li class="toctree-l3"><a class="reference internal" href="cli/deriva-annotation-config.html#the-table-annotations-stanza">The table_annotations stanza</a></li>
<li class="toctree-l3"><a class="reference internal" href="cli/deriva-annotation-config.html#the-column-annotations-stanza">The column_annotations stanza</a></li>
<li class="toctree-l3"><a class="reference internal" href="cli/deriva-annotation-config.html#the-foreign-key-annotations-stanza">The foreign_key_annotations stanza</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="cli/deriva-hatrac-cli.html">deriva-hatrac-cli</a><ul>
<li class="toctree-l2"><a class="reference internal" href="cli/deriva-hatrac-cli.html#features">Features</a></li>
<li class="toctree-l2"><a class="reference internal" href="cli/deriva-hatrac-cli.html#common-options">Common options</a><ul>
<li class="toctree-l3"><a class="reference internal" href="cli/deriva-hatrac-cli.html#hostname">Hostname</a></li>
<li class="toctree-l3"><a class="reference internal" href="cli/deriva-hatrac-cli.html#authentication">Authentication</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="cli/deriva-hatrac-cli.html#namespace-operation-examples">Namespace operation examples</a><ul>
<li class="toctree-l3"><a class="reference internal" href="cli/deriva-hatrac-cli.html#list">List</a></li>
<li class="toctree-l3"><a class="reference internal" href="cli/deriva-hatrac-cli.html#create-namespace">Create Namespace</a></li>
<li class="toctree-l3"><a class="reference internal" href="cli/deriva-hatrac-cli.html#delete-namespace">Delete Namespace</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="cli/deriva-hatrac-cli.html#object-operation-examples">Object operation examples</a><ul>
<li class="toctree-l3"><a class="reference internal" href="cli/deriva-hatrac-cli.html#put-an-object">Put an object</a></li>
<li class="toctree-l3"><a class="reference internal" href="cli/deriva-hatrac-cli.html#get-an-object">Get an object</a></li>
<li class="toctree-l3"><a class="reference internal" href="cli/deriva-hatrac-cli.html#delete-an-object">Delete an object</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="cli/deriva-hatrac-cli.html#acl-operation-examples">ACL operation examples</a><ul>
<li class="toctree-l3"><a class="reference internal" href="cli/deriva-hatrac-cli.html#get-acls">Get ACLs</a></li>
<li class="toctree-l3"><a class="reference internal" href="cli/deriva-hatrac-cli.html#set-acls">Set ACLs</a></li>
<li class="toctree-l3"><a class="reference internal" href="cli/deriva-hatrac-cli.html#delete-acls">Delete ACLs</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="cli/deriva-download-cli.html">deriva-download-cli</a><ul>
<li class="toctree-l2"><a class="reference internal" href="cli/deriva-download-cli.html#features">Features</a></li>
<li class="toctree-l2"><a class="reference internal" href="cli/deriva-download-cli.html#command-line-options">Command-Line options</a><ul>
<li class="toctree-l3"><a class="reference internal" href="cli/deriva-download-cli.html#positional-arguments">Positional arguments:</a><ul>
<li class="toctree-l4"><a class="reference internal" href="cli/deriva-download-cli.html#host"><code class="docutils literal notranslate"><span class="pre">&lt;host&gt;</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="cli/deriva-download-cli.html#config-file"><code class="docutils literal notranslate"><span class="pre">&lt;config</span> <span class="pre">file&gt;</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="cli/deriva-download-cli.html#output-dir"><code class="docutils literal notranslate"><span class="pre">&lt;output</span> <span class="pre">dir&gt;</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="cli/deriva-download-cli.html#optional-arguments">Optional arguments:</a><ul>
<li class="toctree-l4"><a class="reference internal" href="cli/deriva-download-cli.html#token"><code class="docutils literal notranslate"><span class="pre">--token</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="cli/deriva-download-cli.html#credential-file"><code class="docutils literal notranslate"><span class="pre">--credential-file</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="cli/deriva-download-cli.html#catalog"><code class="docutils literal notranslate"><span class="pre">--catalog</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="cli/deriva-download-cli.html#configuration-file-format">Configuration file format</a><ul>
<li class="toctree-l3"><a class="reference internal" href="cli/deriva-download-cli.html#configuration-file-element-catalog">Configuration file element: <code class="docutils literal notranslate"><span class="pre">catalog</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="cli/deriva-download-cli.html#configuration-file-element-bag">Configuration file element: <code class="docutils literal notranslate"><span class="pre">bag</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="cli/deriva-download-cli.html#configuration-file-element-env">Configuration file element: <code class="docutils literal notranslate"><span class="pre">env</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="cli/deriva-download-cli.html#supported-output-formats">Supported output formats</a></li>
<li class="toctree-l2"><a class="reference internal" href="cli/deriva-download-cli.html#output-format-details">Output format details</a><ul>
<li class="toctree-l3"><a class="reference internal" href="cli/deriva-download-cli.html#env"><code class="docutils literal notranslate"><span class="pre">env</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="cli/deriva-download-cli.html#csv"><code class="docutils literal notranslate"><span class="pre">csv</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="cli/deriva-download-cli.html#json"><code class="docutils literal notranslate"><span class="pre">json</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="cli/deriva-download-cli.html#json-stream"><code class="docutils literal notranslate"><span class="pre">json-stream</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="cli/deriva-download-cli.html#download"><code class="docutils literal notranslate"><span class="pre">download</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="cli/deriva-download-cli.html#fetch"><code class="docutils literal notranslate"><span class="pre">fetch</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">deriva-py</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>DataPath :: Data Update Example</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/derivapy-datapath-update.ipynb.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput,
div.nbinput div.prompt,
div.nbinput div.input_area,
div.nbinput div[class*=highlight],
div.nbinput div[class*=highlight] pre,
div.nboutput,
div.nbinput div.prompt,
div.nbinput div.output_area,
div.nboutput div[class*=highlight],
div.nboutput div[class*=highlight] pre {
    background: none;
    border: none;
    padding: 0 0;
    margin: 0;
    box-shadow: none;
}

/* avoid gaps between output lines */
div.nboutput div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput,
div.nboutput {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput,
    div.nboutput {
        flex-direction: column;
    }
}

/* input container */
div.nbinput {
    padding-top: 5px;
}

/* last container */
div.nblast {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput div.prompt pre {
    color: #303F9F;
}

/* output prompt */
div.nboutput div.prompt pre {
    color: #D84315;
}

/* all prompts */
div.nbinput div.prompt,
div.nboutput div.prompt {
    min-width: 8ex;
    padding-top: 0.4em;
    padding-right: 0.4em;
    text-align: right;
    flex: 0;
}
@media (max-width: 540px) {
    div.nbinput div.prompt,
    div.nboutput div.prompt {
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput div.prompt.empty {
        padding: 0;
    }
}

/* disable scrollbars on prompts */
div.nbinput div.prompt pre,
div.nboutput div.prompt pre {
    overflow: hidden;
}

/* input/output area */
div.nbinput div.input_area,
div.nboutput div.output_area {
    padding: 0.4em;
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput div.input_area,
    div.nboutput div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput div.input_area {
    border: 1px solid #cfcfcf;
    border-radius: 2px;
    background: #f7f7f7;
}

/* override MathJax center alignment in output cells */
div.nboutput div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.pngmath center alignment in output cells */
div.nboutput div.math p {
    text-align: left;
}

/* standard error */
div.nboutput div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-default-inverse-fg { color: #FFFFFF; }
.ansi-default-inverse-bg { background-color: #000000; }

.ansi-bold { font-weight: bold; }
.ansi-underline { text-decoration: underline; }

/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast,
.nboutput.nblast {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast + .nbinput {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}
</style>
<div class="section" id="DataPath-::-Data-Update-Example">
<h1>DataPath :: Data Update Example<a class="headerlink" href="#DataPath-::-Data-Update-Example" title="Permalink to this headline">¶</a></h1>
<p>This notebook demonstrates how to perform simple data manipulations.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>In [1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">from</span> <span class="nn">deriva.core</span> <span class="k">import</span> <span class="n">ErmrestCatalog</span><span class="p">,</span> <span class="n">get_credential</span>
</pre></div>
</div>
</div>
<p>This example uses a development server with a throw away catalog. You
<em>will not</em> have sufficient permissions to be able to run this example.
This notebook is for documentation purpose only.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>In [2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">scheme</span> <span class="o">=</span> <span class="s1">&#39;https&#39;</span>
<span class="n">hostname</span> <span class="o">=</span> <span class="s1">&#39;dev.facebase.org&#39;</span>
<span class="n">catalog_number</span> <span class="o">=</span> <span class="mi">1</span>
</pre></div>
</div>
</div>
<p>Use DERIVA-Auth to get a <code class="docutils literal notranslate"><span class="pre">credential</span></code> or use <code class="docutils literal notranslate"><span class="pre">None</span></code> if your catalog
allows anonymous access.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>In [3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">credential</span> <span class="o">=</span> <span class="n">get_credential</span><span class="p">(</span><span class="n">hostname</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>Now, connect to your catalog and the <code class="docutils literal notranslate"><span class="pre">pathbuilder</span></code> interface for the
catalog.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>In [4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="k">assert</span> <span class="n">scheme</span> <span class="o">==</span> <span class="s1">&#39;http&#39;</span> <span class="ow">or</span> <span class="n">scheme</span> <span class="o">==</span> <span class="s1">&#39;https&#39;</span><span class="p">,</span> <span class="s2">&quot;Invalid http scheme used.&quot;</span>
<span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">hostname</span><span class="p">,</span> <span class="nb">str</span><span class="p">),</span> <span class="s2">&quot;Hostname not set.&quot;</span>
<span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">catalog_number</span><span class="p">,</span> <span class="nb">int</span><span class="p">),</span> <span class="s2">&quot;Invalid catalog number&quot;</span>
<span class="n">catalog</span> <span class="o">=</span> <span class="n">ErmrestCatalog</span><span class="p">(</span><span class="n">scheme</span><span class="p">,</span> <span class="n">hostname</span><span class="p">,</span> <span class="n">catalog_number</span><span class="p">,</span> <span class="n">credential</span><span class="p">)</span>
<span class="n">pb</span> <span class="o">=</span> <span class="n">catalog</span><span class="o">.</span><span class="n">getPathBuilder</span><span class="p">()</span>
</pre></div>
</div>
</div>
<p>For this example, we will create or modify entities of the “Dataset”
table of a catalog that uses the FaceBase data model.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>In [5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">dataset</span> <span class="o">=</span> <span class="n">pb</span><span class="o">.</span><span class="n">isa</span><span class="o">.</span><span class="n">dataset</span>
<span class="n">dataset</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>Out[5]:
</pre></div>
</div>
<div class="output_area highlight-none notranslate"><div class="highlight"><pre>
<span></span>Table name: &#39;dataset&#39;
List of columns:
  Column name: &#39;id&#39; Type: serial4   Comment: &#39;None&#39;
  Column name: &#39;accession&#39;  Type: text      Comment: &#39;None&#39;
  Column name: &#39;title&#39;      Type: text      Comment: &#39;None&#39;
  Column name: &#39;project&#39;    Type: int8      Comment: &#39;None&#39;
  Column name: &#39;funding&#39;    Type: text      Comment: &#39;None&#39;
  Column name: &#39;summary&#39;    Type: text      Comment: &#39;None&#39;
  Column name: &#39;description&#39;        Type: markdown  Comment: &#39;None&#39;
  Column name: &#39;view_gene_summary&#39;  Type: text      Comment: &#39;None&#39;
  Column name: &#39;mouse_genetic&#39;      Type: text      Comment: &#39;None&#39;
  Column name: &#39;human_anatomic&#39;     Type: text      Comment: &#39;None&#39;
  Column name: &#39;study_design&#39;       Type: markdown  Comment: &#39;None&#39;
  Column name: &#39;release_date&#39;       Type: date      Comment: &#39;None&#39;
  Column name: &#39;status&#39;     Type: text      Comment: &#39;None&#39;
  Column name: &#39;gene_summary&#39;       Type: int4      Comment: &#39;None&#39;
  Column name: &#39;thumbnail&#39;  Type: int4      Comment: &#39;None&#39;
  Column name: &#39;show_in_jbrowse&#39;    Type: boolean   Comment: &#39;None&#39;
  Column name: &#39;_keywords&#39;  Type: text      Comment: &#39;None&#39;
  Column name: &#39;RID&#39;        Type: ermrest_rid       Comment: &#39;System-generated unique row ID.&#39;
  Column name: &#39;RCB&#39;        Type: ermrest_rcb       Comment: &#39;System-generated row created by user provenance.&#39;
  Column name: &#39;RMB&#39;        Type: ermrest_rmb       Comment: &#39;System-generated row modified by user provenance.&#39;
  Column name: &#39;RCT&#39;        Type: ermrest_rct       Comment: &#39;System-generated row creation timestamp.&#39;
  Column name: &#39;RMT&#39;        Type: ermrest_rmt       Comment: &#39;System-generated row modification timestamp&#39;
</pre></div>
</div>
</div>
<div class="section" id="Insert-example">
<h2>Insert example<a class="headerlink" href="#Insert-example" title="Permalink to this headline">¶</a></h2>
<p>Here we will insert an entity into the dataset table.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>In [6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">new_entity</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;title&#39;</span><span class="p">:</span> <span class="s1">&#39;A test dataset by derivapy&#39;</span><span class="p">,</span>
    <span class="s1">&#39;description&#39;</span><span class="p">:</span> <span class="s1">&#39;This was created by the deriva-py API.&#39;</span><span class="p">,</span>
    <span class="s1">&#39;project&#39;</span><span class="p">:</span> <span class="mi">311</span>
<span class="p">}</span>
<span class="n">entities</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">insert</span><span class="p">([</span><span class="n">new_entity</span><span class="p">],</span> <span class="n">defaults</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="s1">&#39;accession&#39;</span><span class="p">})</span>
</pre></div>
</div>
</div>
<p>The insert operation returns the inserted entities, which now have any
system generated attributes filled in.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>In [7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="nb">list</span><span class="p">(</span><span class="n">entities</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>Out[7]:
</pre></div>
</div>
<div class="output_area highlight-none notranslate"><div class="highlight"><pre>
<span></span>[{&#39;RCB&#39;: &#39;https://auth.globus.org/bb256144-d274-11e5-adb1-13a4cc43acbd&#39;,
  &#39;RCT&#39;: &#39;2018-05-25T14:16:20.951563-07:00&#39;,
  &#39;RID&#39;: 572108,
  &#39;RMB&#39;: &#39;https://auth.globus.org/bb256144-d274-11e5-adb1-13a4cc43acbd&#39;,
  &#39;RMT&#39;: &#39;2018-05-25T14:16:20.951563-07:00&#39;,
  &#39;_keywords&#39;: None,
  &#39;accession&#39;: &#39;FB00000974&#39;,
  &#39;description&#39;: &#39;This was created by the deriva-py API.&#39;,
  &#39;funding&#39;: None,
  &#39;gene_summary&#39;: None,
  &#39;human_anatomic&#39;: None,
  &#39;id&#39;: 14219,
  &#39;mouse_genetic&#39;: None,
  &#39;project&#39;: 311,
  &#39;release_date&#39;: None,
  &#39;show_in_jbrowse&#39;: None,
  &#39;status&#39;: None,
  &#39;study_design&#39;: None,
  &#39;summary&#39;: None,
  &#39;thumbnail&#39;: None,
  &#39;title&#39;: &#39;A test dataset by derivapy&#39;,
  &#39;view_gene_summary&#39;: None}]
</pre></div>
</div>
</div>
</div>
<div class="section" id="Update-example">
<h2>Update example<a class="headerlink" href="#Update-example" title="Permalink to this headline">¶</a></h2>
<p>Here we will change the description for the entity we inserted and
update it in the catalog.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>In [8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">entities</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;description&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;A test dataset that was updated by derivapy&#39;</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>In [9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">updated_entities</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">entities</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>Similar to the insert operation, the update operation also returns the
updated entities. Notice that the system-managed ‘RMT’ (Row Modified
Timestamp) attribute has been update too.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>In [10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="nb">list</span><span class="p">(</span><span class="n">updated_entities</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>Out[10]:
</pre></div>
</div>
<div class="output_area highlight-none notranslate"><div class="highlight"><pre>
<span></span>[{&#39;RCB&#39;: &#39;https://auth.globus.org/bb256144-d274-11e5-adb1-13a4cc43acbd&#39;,
  &#39;RCT&#39;: &#39;2018-05-25T14:16:20.951563-07:00&#39;,
  &#39;RID&#39;: 572108,
  &#39;RMB&#39;: &#39;https://auth.globus.org/bb256144-d274-11e5-adb1-13a4cc43acbd&#39;,
  &#39;RMT&#39;: &#39;2018-05-25T14:16:25.63306-07:00&#39;,
  &#39;_keywords&#39;: None,
  &#39;accession&#39;: &#39;FB00000974&#39;,
  &#39;description&#39;: &#39;A test dataset that was updated by derivapy&#39;,
  &#39;funding&#39;: None,
  &#39;gene_summary&#39;: None,
  &#39;human_anatomic&#39;: None,
  &#39;id&#39;: 14219,
  &#39;mouse_genetic&#39;: None,
  &#39;project&#39;: 311,
  &#39;release_date&#39;: None,
  &#39;show_in_jbrowse&#39;: None,
  &#39;status&#39;: None,
  &#39;study_design&#39;: None,
  &#39;summary&#39;: None,
  &#39;thumbnail&#39;: None,
  &#39;title&#39;: &#39;A test dataset by derivapy&#39;,
  &#39;view_gene_summary&#39;: None}]
</pre></div>
</div>
</div>
<div class="section" id="Update-with-custom-correlation-and-targets-specified">
<h3>Update with custom correlation and targets specified<a class="headerlink" href="#Update-with-custom-correlation-and-targets-specified" title="Permalink to this headline">¶</a></h3>
<p>You can also specify which columns to use to correlate the input with
the existing rows in the table and which columsn to be the targets of
the update. Per the ERMrest protocol, extra data in the update payload
(<code class="docutils literal notranslate"><span class="pre">entities</span></code>) will be ignored. The inputs must be <code class="docutils literal notranslate"><span class="pre">iterable</span></code>s of
strings or objects that implement the <code class="docutils literal notranslate"><span class="pre">__str__</span></code> method.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>In [11]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">entities</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;description&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;Yet another update using derivapy&#39;</span>
<span class="n">entities</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;title&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;And a title change&#39;</span>
<span class="n">updated_entities</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">entities</span><span class="p">,</span> <span class="p">[</span><span class="n">dataset</span><span class="o">.</span><span class="n">id</span><span class="p">],</span> <span class="p">[</span><span class="n">dataset</span><span class="o">.</span><span class="n">description</span><span class="p">,</span> <span class="s1">&#39;title&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>In [12]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="nb">list</span><span class="p">(</span><span class="n">updated_entities</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>Out[12]:
</pre></div>
</div>
<div class="output_area highlight-none notranslate"><div class="highlight"><pre>
<span></span>[{&#39;description&#39;: &#39;Yet another update using derivapy&#39;,
  &#39;id&#39;: 14219,
  &#39;title&#39;: &#39;And a title change&#39;}]
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="Delete-example">
<h2>Delete example<a class="headerlink" href="#Delete-example" title="Permalink to this headline">¶</a></h2>
<p>Unlike <code class="docutils literal notranslate"><span class="pre">insert</span></code> and <code class="docutils literal notranslate"><span class="pre">update</span></code> which are performed within the context
of a table, the <code class="docutils literal notranslate"><span class="pre">delete</span></code> operation is performed within the context of
a data path.</p>
<p>We know the <code class="docutils literal notranslate"><span class="pre">RID</span></code> from above, which is a single-column key for the
entities in the <code class="docutils literal notranslate"><span class="pre">dataset</span></code> (and any other EMRrest) table. We can use
this attribute to form a path to the newly inserted and updated entity.</p>
<p>Note: Any filters could be used in this example; we do not have to use a
key column only. We use the key only because we want to delete that
specific entity which we just created. If we wanted to, we could link
addition tables and apply additional filters to delete entities computed
from a <em>complex</em> path.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>In [13]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">path</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">RID</span> <span class="o">==</span> <span class="n">entities</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;RID&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div>
<p>On successful delete, no content will be returned.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>In [14]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">path</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, USC Information Sciences Institute, Informatics Systems Research Division.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'5.8',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  <script type="text/javascript" src="_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>