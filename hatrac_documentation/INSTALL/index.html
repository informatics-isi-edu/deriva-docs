



<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="Documentation for DERIVA software.">
      
      
        <link rel="canonical" href="https://informatics-isi-edu.github.io/deriva-docs/hatrac_documentation/INSTALL/">
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../images/favicon.ico">
      <meta name="generator" content="mkdocs-0.17.4, mkdocs-material-2.9.2">
    
    
      
        <title>Installing on Red Hat-derived Linux - DERIVA Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.ba0fd1a6.css">
      
      
    
    
      <script src="../../assets/javascripts/modernizr.1aa3b519.js"></script>
    
    
      <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
      
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../assets/fonts/material-icons.css">
    
      <link rel="stylesheet" href="../../css/extra.css">
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#hatrac-installation" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://informatics-isi-edu.github.io/deriva-docs/" title="DERIVA Documentation" class="md-header-nav__button md-logo">
          
            <img src="../../images/logo.png" width="24" height="24">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                DERIVA Documentation
              </span>
              <span class="md-header-nav__topic">
                Installing on Red Hat-derived Linux
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <span class="md-nav__button md-logo">
      
        <img src="../../images/logo.png" width="48" height="48">
      
    </span>
    DERIVA Documentation
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../using/" title="Using DERIVA" class="md-nav__link">
      Using DERIVA
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../concepts/" title="Key Concepts" class="md-nav__link">
      Key Concepts
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../development/" title="Developing with DERIVA" class="md-nav__link">
      Developing with DERIVA
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Data Client Tools
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Data Client Tools
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../deriva-py_documentation/" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../deriva-py_documentation/install/" title="Installing deriva-py" class="md-nav__link">
      Installing deriva-py
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../deriva-py_documentation/deriva-download-cli/" title="Bulk export tool (deriva-download-cli)" class="md-nav__link">
      Bulk export tool (deriva-download-cli)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../deriva-py_documentation/deriva-hatrac-cli/" title="Interact with Hatrac object store (deriva-hatrac-cli)" class="md-nav__link">
      Interact with Hatrac object store (deriva-hatrac-cli)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../deriva-py_documentation/deriva-acl-config/" title="Configure ACLs (deriva-acl-config)" class="md-nav__link">
      Configure ACLs (deriva-acl-config)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../deriva-py_documentation/deriva-annotation-config/" title="Configure annotations (deriva-annotation-config)" class="md-nav__link">
      Configure annotations (deriva-annotation-config)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../deriva-py_documentation/api/" title="API Docs" class="md-nav__link">
      API Docs
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      DERIVA GUI Tools
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        DERIVA GUI Tools
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../deriva-py_documentation/" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../deriva-py_documentation/install/" title="Installing GUIs" class="md-nav__link">
      Installing GUIs
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../deriva-py_documentation/deriva-auth/" title="Authenticating data with DERIVA Auth" class="md-nav__link">
      Authenticating data with DERIVA Auth
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../deriva-py_documentation/deriva-upload/" title="Using DERIVA Upload" class="md-nav__link">
      Using DERIVA Upload
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7">
    
    <label class="md-nav__link" for="nav-7">
      ERMrest Documentation
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        ERMrest Documentation
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../ermrest_documentation/" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-2" type="checkbox" id="nav-7-2">
    
    <label class="md-nav__link" for="nav-7-2">
      User Docs
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-7-2">
        User Docs
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../ermrest_documentation/user-doc/install-redhat/" title="Installing on Red Hat-derived Linux" class="md-nav__link">
      Installing on Red Hat-derived Linux
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../ermrest_documentation/user-doc/annotation/" title="Model Annotation" class="md-nav__link">
      Model Annotation
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../ermrest_documentation/user-doc/tuning/" title="Performance Tuning" class="md-nav__link">
      Performance Tuning
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../ermrest_documentation/user-doc/ermrest-registry-purge/" title="ermrest-registry-purge command" class="md-nav__link">
      ermrest-registry-purge command
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../ermrest_documentation/user-doc/ermrest-client-table/" title="System Table `ermrest_client`" class="md-nav__link">
      System Table `ermrest_client`
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../ermrest_documentation/user-doc/history-track/" title="History Tracking for DBAs and Programmers" class="md-nav__link">
      History Tracking for DBAs and Programmers
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-3" type="checkbox" id="nav-7-3">
    
    <label class="md-nav__link" for="nav-7-3">
      ERMrest API and Service Semantics
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="4">
      <label class="md-nav__title" for="nav-7-3">
        ERMrest API and Service Semantics
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../ermrest_documentation/api-doc/" title="Guide to the ERMrest API" class="md-nav__link">
      Guide to the ERMrest API
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../ermrest_documentation/api-doc/rest-catalog/" title="ERMrest Catalog Operations" class="md-nav__link">
      ERMrest Catalog Operations
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-3-3" type="checkbox" id="nav-7-3-3">
    
    <label class="md-nav__link" for="nav-7-3-3">
      ERMrest Model Guide
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="7">
      <label class="md-nav__title" for="nav-7-3-3">
        ERMrest Model Guide
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../ermrest_documentation/api-doc/model/naming/" title="ERMrest Model Resource Naming" class="md-nav__link">
      ERMrest Model Resource Naming
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../ermrest_documentation/api-doc/model/rest/" title="ERMrest Model Operations" class="md-nav__link">
      ERMrest Model Operations
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-3-4" type="checkbox" id="nav-7-3-4">
    
    <label class="md-nav__link" for="nav-7-3-4">
      ERMrest Access Control
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="8">
      <label class="md-nav__title" for="nav-7-3-4">
        ERMrest Access Control
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../ermrest_documentation/api-doc/acl/concepts/" title="Access Concepts" class="md-nav__link">
      Access Concepts
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../ermrest_documentation/api-doc/acl/static/" title="Static Model-Based Policies" class="md-nav__link">
      Static Model-Based Policies
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../ermrest_documentation/api-doc/acl/dynamic/" title="Dynamic Data-Dependent Policies" class="md-nav__link">
      Dynamic Data-Dependent Policies
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-3-5" type="checkbox" id="nav-7-3-5">
    
    <label class="md-nav__link" for="nav-7-3-5">
      Client-Specific Rights
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="9">
      <label class="md-nav__title" for="nav-7-3-5">
        Client-Specific Rights
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../ermrest_documentation/api-doc/acl/rights/" title="Rights Summaries" class="md-nav__link">
      Rights Summaries
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-3-5-2" type="checkbox" id="nav-7-3-5-2">
    
    <label class="md-nav__link" for="nav-7-3-5-2">
      ERMrest Data Resources
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="11">
      <label class="md-nav__title" for="nav-7-3-5-2">
        ERMrest Data Resources
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../ermrest_documentation/api-doc/data/naming/" title="ERMrest Data Resources" class="md-nav__link">
      ERMrest Data Resources
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../ermrest_documentation/api-doc/data/rest/" title="ERMrest Data Operations" class="md-nav__link">
      ERMrest Data Operations
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-3-5-3" type="checkbox" id="nav-7-3-5-3">
    
    <label class="md-nav__link" for="nav-7-3-5-3">
      ERMrest History Management
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="12">
      <label class="md-nav__title" for="nav-7-3-5-3">
        ERMrest History Management
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../ermrest_documentation/api-doc/history/naming/" title="ERMrest History Management Resources" class="md-nav__link">
      ERMrest History Management Resources
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../ermrest_documentation/api-doc/history/rest/" title="ERMrest History Management Operations" class="md-nav__link">
      ERMrest History Management Operations
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8" type="checkbox" id="nav-8" checked>
    
    <label class="md-nav__link" for="nav-8">
      Hatrac Documentation
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-8">
        Hatrac Documentation
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8-2" type="checkbox" id="nav-8-2" checked>
    
    <label class="md-nav__link" for="nav-8-2">
      User Docs
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-8-2">
        User Docs
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Installing on Red Hat-derived Linux
      </label>
    
    <a href="./" title="Installing on Red Hat-derived Linux" class="md-nav__link md-nav__link--active">
      Installing on Red Hat-derived Linux
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#install-code" title="Install code" class="md-nav__link">
    Install code
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#basic-testing" title="Basic testing" class="md-nav__link">
    Basic testing
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configure-web-stack" title="Configure web stack" class="md-nav__link">
    Configure web stack
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#example-hatrac-configuration" title="Example Hatrac configuration" class="md-nav__link">
    Example Hatrac configuration
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#rest-api-testing" title="REST API testing" class="md-nav__link">
    REST API testing
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#example-webauthn2-configuration" title="Example Webauthn2 configuration" class="md-nav__link">
    Example Webauthn2 configuration
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#example-apache-configuration" title="Example Apache configuration" class="md-nav__link">
    Example Apache configuration
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#working-with-se-linux" title="Working with SE-Linux" class="md-nav__link">
    Working with SE-Linux
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#errors-regarding-wsgi-socket" title="Errors regarding WSGI socket" class="md-nav__link">
    Errors regarding WSGI socket
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../HOWTO/" title="Other HOWTO information" class="md-nav__link">
      Other HOWTO information
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../REST-API/" title="Hatrac API and Service Semantics" class="md-nav__link">
      Hatrac API and Service Semantics
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#install-code" title="Install code" class="md-nav__link">
    Install code
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#basic-testing" title="Basic testing" class="md-nav__link">
    Basic testing
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configure-web-stack" title="Configure web stack" class="md-nav__link">
    Configure web stack
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#example-hatrac-configuration" title="Example Hatrac configuration" class="md-nav__link">
    Example Hatrac configuration
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#rest-api-testing" title="REST API testing" class="md-nav__link">
    REST API testing
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#example-webauthn2-configuration" title="Example Webauthn2 configuration" class="md-nav__link">
    Example Webauthn2 configuration
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#example-apache-configuration" title="Example Apache configuration" class="md-nav__link">
    Example Apache configuration
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#working-with-se-linux" title="Working with SE-Linux" class="md-nav__link">
    Working with SE-Linux
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#errors-regarding-wsgi-socket" title="Errors regarding WSGI socket" class="md-nav__link">
    Errors regarding WSGI socket
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="hatrac-installation">Hatrac Installation<a class="headerlink" href="#hatrac-installation" title="Permanent link">&para;</a></h1>
<p><a href="http://github.com/informatics-isi-edu/hatrac">Hatrac</a> (pronounced
"hat rack") is a simple object storage service for web-based,
data-oriented collaboration.</p>
<h2 id="install-code">Install code<a class="headerlink" href="#install-code" title="Permanent link">&para;</a></h2>
<ol>
<li>Check out the development code from GitHub.</li>
<li>Install prerequisites:</li>
<li>Apache HTTPD</li>
<li>PostgreSQL</li>
<li>Python</li>
<li>web.py</li>
<li>webauthn2</li>
<li>Install hatrac Python package from top-level of development code.</li>
<li><code>python setup.py install</code></li>
<li>Run <a href="#basic-testing">basic tests</a> or continue to <a href="#configure-web-stack">configure the web stack</a>.</li>
</ol>
<h2 id="basic-testing">Basic testing<a class="headerlink" href="#basic-testing" title="Permanent link">&para;</a></h2>
<p>You can perform some local testing of Hatrac without configuring the
whole web service stack, daemon account, nor daemon account configuration data:</p>
<pre><code># make sure Hatrac is installed
% python setup.py install

# get rid of any previous test data
% dropdb hatrac_test
% rm -rf hatrac_test_data

# create empty test database
% createdb hatrac_test

# run tests
% python test/smoketest.py
</code></pre>
<p>The test script should run to completion without printing anything. If
it encounters errors, diagnostics will be printed and the script will
exit.  You MUST start with an empty test database and empty test data
directory prior to each run of the test.</p>
<h2 id="configure-web-stack">Configure web stack<a class="headerlink" href="#configure-web-stack" title="Permanent link">&para;</a></h2>
<p>These steps continue following the basic
<a href="#install-code">code installation</a>. For installations using SE-Linux,
please see <a href="#working-with-selinux">working with SE-Linux</a> below.</p>
<ol>
<li>Create <code>hatrac</code> daemon account.</li>
<li>E.g. <code>useradd --create-home --system hatrac</code> (as root)</li>
<li>Create <code>hatrac</code> PostgreSQL role.</li>
<li>E.g. <code>createuser -d hatrac</code> (as PostgreSQL superuser)</li>
<li>Configure <code>~hatrac/hatrac_config.json</code></li>
<li>See <a href="#example-hatrac-configuration">example Hatrac configuration</a> below.</li>
<li>Create and initialize <code>hatrac</code> database.</li>
<li>E.g. <code>createdb hatrac</code> (as <code>hatrac</code> user)</li>
<li>E.g. <code>hatrac-deploy your_username_or_group</code> (as <code>hatrac</code> user)</li>
<li>Create file storage directory under Apache</li>
<li>E.g. <code>mkdir /var/www/hatrac &amp;&amp; chown hatrac /var/www/hatrac</code> (as root)</li>
<li>Configure <code>~hatrac/webauthn2_config.json</code></li>
<li>See <a href="#example-webauthn2-configuration">example Webauthn2 configuration</a> below.</li>
<li>Configure <code>mod_wsgi</code> to run Hatrac</li>
<li>See <a href="#example-apache-configuration">example Apache configuration</a> below.</li>
</ol>
<p>The <code>hatrac-deploy</code> step above depends on having a proper
<code>~hatrac/hatrac_config.json</code> file already populated and an empty
database already created. It simply initializes the database schema.</p>
<p>If working in a SELinux environment see section below to SELinux specific additional steps needed before running the tests</p>
<h2 id="example-hatrac-configuration">Example Hatrac configuration<a class="headerlink" href="#example-hatrac-configuration" title="Permanent link">&para;</a></h2>
<p>This configuration works on a Fedora and Ubuntu host for a filesystem deployment:</p>
<pre><code>{
    "storage_backend": "filesystem",
    "storage_path": "/var/www/hatrac",
    "database_type": "postgres",
    "database_dsn": "dbname=hatrac",
    "database_schema": "hatrac",
    "database_max_retries": 5,
    "403_html": "&lt;html&gt;&lt;body&gt;&lt;h1&gt;Access Forbidden&lt;/h1&gt;&lt;p&gt;%(message)s&lt;/p&gt;&lt;/body&gt;&lt;/html&gt;",
    "401_html": "&lt;html&gt;&lt;body&gt;&lt;h1&gt;Authentication Required&lt;/h1&gt;&lt;p&gt;%(message)s&lt;/p&gt;&lt;/body&gt;&lt;/html&gt;"
}
</code></pre>
<p>This configuration works for an Amazon AWS S3 deployment:</p>
<pre><code>{
    "backend": "amazons3",
    "s3_bucket" : &lt;S3_BUCKET_NAME&gt;,
    "s3_connection": {
    "aws_access_key_id" : &lt;AWS_ACCESS_KEY_ID&gt;,
        "aws_secret_access_key": &lt;AWS_SECRET_ACCESS_KEY&gt;
    },
    "database_type": "postgres",
    "database_dsb": "dbname=hatrac",
    "database_schema": "hatrac",
    "database_max_retries": 5
}
</code></pre>
<h2 id="rest-api-testing">REST API testing<a class="headerlink" href="#rest-api-testing" title="Permanent link">&para;</a></h2>
<p>You can perform system testing of the whole web service stack, if
configured with cookie-based authentication (such as using a companion
ERMrest installation as described in the subsequent configration
examples of this document):</p>
<pre><code># manually create a session cookie
% curl -b cookie -c cookie \
   -d username=testuser -d password=testpassword \
   https://$(hostname)/ermrest/auth/session

# run the test script
% COOKIES=cookie bash test/rest-smoketest.sh
</code></pre>
<h2 id="example-webauthn2-configuration">Example Webauthn2 configuration<a class="headerlink" href="#example-webauthn2-configuration" title="Permanent link">&para;</a></h2>
<p>This configuration allows Hatrac to share an existing Webauthn2
deployment from an ERMrest installation (if ERMrest is configured with
the same cookie name and path settings):</p>
<pre><code>{
      "require_client": true,
      "require_attributes": true, 
      "listusers_permit": ["admin"], 
      "listattributes_permit": ["admin"], 
      "manageusers_permit": ["admin"], 
      "manageattributes_permit": ["admin"],

      "session_expiration_minutes": 30, 
      "def_passwd_len": 10, 
      "hash_passwd_reps": 1000,

      "sessionids_provider": "webcookie", 
      "sessionstates_provider": "database", 
      "clients_provider": "database", 
      "attributes_provider": "database",

      "handler_uri_usersession": "/ermrest/authn/session",

      "web_cookie_name": "ermrest", 
      "web_cookie_path": "/", 
      "web_cookie_secure": true, 
      "setheader": false,

      "database_schema": "webauthn2", 
      "database_type": "postgres", 
      "database_dsn": "dbname=ermrest", 
      "database_max_retries": 5
}
</code></pre>
<p>You will also have to grant ermrest permissions to the hatrac role:
GRANT ermrest TO hatrac ; (as postgres user)</p>
<p><strong>Note</strong>: at present, Hatrac does not expose any Webauthn2 REST APIs
so you MUST share an existing deployment as above if you want to use a
local account and session-based login for testing.  Additionally, you
must then grant the <code>ermrest</code> role to the <code>hatrac</code> role in PostgreSQL
so that Hatrac can look up client authentication information at
runtime.</p>
<h2 id="example-apache-configuration">Example Apache configuration<a class="headerlink" href="#example-apache-configuration" title="Permanent link">&para;</a></h2>
<p>See the sample <code>wsgi_hatrac.conf</code> file in the git repo, which would be
installed under <code>/etc/httpd/conf.d/</code> on Red Hat flavored machines:</p>
<pre><code>AllowEncodedSlashes On

WSGIPythonOptimize 1
WSGIDaemonProcess hatrac processes=4 threads=4 user=hatrac maximum-requests=2000
WSGIScriptAlias /hatrac /usr/lib/python2.7/site-packages/hatrac/hatrac.wsgi
WSGIPassAuthorization On

WSGISocketPrefix /var/run/wsgi/wsgi

&lt;Location /hatrac&gt;

   AuthType webauthn
   Require webauthn-optional

   WSGIProcessGroup hatrac

&lt;/Location&gt;
</code></pre>
<h2 id="working-with-se-linux">Working with SE-Linux<a class="headerlink" href="#working-with-se-linux" title="Permanent link">&para;</a></h2>
<p>The following is an example set of commands to allow Hatrac to write
to the filesystem in a Fedora installation.  On other distributions,
the appropriate path and SE-Linux contexts might vary slightly:</p>
<pre><code>setsebool -P httpd_can_network_connect_db on
semanage fcontext --add --type httpd_sys_rw_content_t "/var/www/hatrac(/.*)?"
restorecon -rv /var/www/hatrac
semanage fcontext --add --type httpd_sys_content_t "/home/hatrac(/.*)?"
restorecon -rv /home/hatrac
</code></pre>
<h3 id="errors-regarding-wsgi-socket">Errors regarding WSGI socket<a class="headerlink" href="#errors-regarding-wsgi-socket" title="Permanent link">&para;</a></h3>
<p>On some versions of Fedora and CentOS, you may encounter errors in the
Apache SSL server log similar to <code>Unable to connect to WSGI daemon
process on '/var/run/wsgi/wsgi.1331.1.1.sock'</code>.</p>
<p>A workaround is to configure the SE-Linux context:</p>
<pre><code>semanage fcontext --add --type httpd_var_run_t "/var/run/wsgi"
restorecon -rv /var/run/wsgi
</code></pre>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../" title="Introduction" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Introduction
              </span>
            </div>
          </a>
        
        
          <a href="../HOWTO/" title="Other HOWTO information" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Other HOWTO information
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2018 <a href="http://deriva.isi.edu">DERIVA</a>.
          </div>
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      <div class="md-footer-logo">
        <img src="/images/deriva-h50-simple.png">
      </div>
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.a59e2a89.js"></script>
      
      <script>app.initialize({version:"0.17.4",url:{base:"../.."}})</script>
      
    
    
      
    
  </body>
</html>