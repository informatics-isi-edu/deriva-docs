



<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="Documentation for DERIVA software.">
      
      
        <link rel="canonical" href="https://informatics-isi-edu.github.io/deriva-docs/deriva-py_documentation/api/">
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../images/favicon.ico">
      <meta name="generator" content="mkdocs-0.17.4, mkdocs-material-2.9.2">
    
    
      
        <title>API Docs - DERIVA Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.ba0fd1a6.css">
      
      
    
    
      <script src="../../assets/javascripts/modernizr.1aa3b519.js"></script>
    
    
      <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
      
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../assets/fonts/material-icons.css">
    
      <link rel="stylesheet" href="../../css/extra.css">
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#python-apis" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://informatics-isi-edu.github.io/deriva-docs/" title="DERIVA Documentation" class="md-header-nav__button md-logo">
          
            <img src="../../images/logo.png" width="24" height="24">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                DERIVA Documentation
              </span>
              <span class="md-header-nav__topic">
                API Docs
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <span class="md-nav__button md-logo">
      
        <img src="../../images/logo.png" width="48" height="48">
      
    </span>
    DERIVA Documentation
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../about/" title="About DERIVA" class="md-nav__link">
      About DERIVA
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../framework/" title="DERIVA Framework" class="md-nav__link">
      DERIVA Framework
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Using DERIVA
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Using DERIVA
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../users-guide/" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../users-guide/using-chaise/" title="Using Chaise" class="md-nav__link">
      Using Chaise
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../users-guide/managing-data/" title="Managing Data" class="md-nav__link">
      Managing Data
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../users-guide/managing-catalogs/" title="Managing Catalogs" class="md-nav__link">
      Managing Catalogs
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5" checked>
    
    <label class="md-nav__link" for="nav-5">
      Reference Section
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Reference Section
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-1" type="checkbox" id="nav-5-1" checked>
    
    <label class="md-nav__link" for="nav-5-1">
      deriva-py
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-5-1">
        deriva-py
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../install/" title="Installing deriva-py" class="md-nav__link">
      Installing deriva-py
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../deriva-upload/" title="Upload tool (deriva-upload)" class="md-nav__link">
      Upload tool (deriva-upload)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../deriva-hatrac-cli/" title="Interact with Hatrac object store (deriva-hatrac-cli)" class="md-nav__link">
      Interact with Hatrac object store (deriva-hatrac-cli)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../deriva-acl-config/" title="Configure ACLs (deriva-acl-config)" class="md-nav__link">
      Configure ACLs (deriva-acl-config)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../deriva-annotation-config/" title="Configure annotations (deriva-annotation-config)" class="md-nav__link">
      Configure annotations (deriva-annotation-config)
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        API Docs
      </label>
    
    <a href="./" title="API Docs" class="md-nav__link md-nav__link--active">
      API Docs
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#datapath" title="DataPath" class="md-nav__link">
    DataPath
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#features" title="Features" class="md-nav__link">
    Features
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#limitations" title="Limitations" class="md-nav__link">
    Limitations
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tutorials" title="Tutorials" class="md-nav__link">
    Tutorials
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ermrest-model-management" title="ERMrest Model Management" class="md-nav__link">
    ERMrest Model Management
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#features_1" title="Features" class="md-nav__link">
    Features
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#limitations_1" title="Limitations" class="md-nav__link">
    Limitations
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#examples" title="Examples" class="md-nav__link">
    Examples
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#add-table-to-schema" title="Add Table to Schema" class="md-nav__link">
    Add Table to Schema
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#add-a-vocabulary-term-table" title="Add a Vocabulary Term Table" class="md-nav__link">
    Add a Vocabulary Term Table
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#add-column-to-table" title="Add Column to Table" class="md-nav__link">
    Add Column to Table
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#remove-a-column-from-a-table" title="Remove a Column from a Table" class="md-nav__link">
    Remove a Column from a Table
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#derivacoreermrest_catalog" title="deriva.core.ermrest_catalog" class="md-nav__link">
    deriva.core.ermrest_catalog
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#catalog-binding" title="Catalog Binding" class="md-nav__link">
    Catalog Binding
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#client-credentials" title="Client Credentials" class="md-nav__link">
    Client Credentials
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#high-level-api-factories" title="High-Level API Factories" class="md-nav__link">
    High-Level API Factories
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#low-level-http-methods" title="Low-Level HTTP Methods" class="md-nav__link">
    Low-Level HTTP Methods
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#http-caching" title="HTTP Caching" class="md-nav__link">
    HTTP Caching
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-2" type="checkbox" id="nav-5-2">
    
    <label class="md-nav__link" for="nav-5-2">
      deriva-qt
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-5-2">
        deriva-qt
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../install/" title="Installing GUIs" class="md-nav__link">
      Installing GUIs
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../deriva-auth/" title="Using DERIVA-Auth" class="md-nav__link">
      Using DERIVA-Auth
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../deriva-upload/" title="Using DERIVA-Upload" class="md-nav__link">
      Using DERIVA-Upload
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-3" type="checkbox" id="nav-5-3">
    
    <label class="md-nav__link" for="nav-5-3">
      ERMrest
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="4">
      <label class="md-nav__title" for="nav-5-3">
        ERMrest
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../ermrest_documentation/" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-3-2" type="checkbox" id="nav-5-3-2">
    
    <label class="md-nav__link" for="nav-5-3-2">
      User Docs
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="6">
      <label class="md-nav__title" for="nav-5-3-2">
        User Docs
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../ermrest_documentation/user-doc/install-redhat/" title="Installing on Red Hat-derived Linux" class="md-nav__link">
      Installing on Red Hat-derived Linux
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../ermrest_documentation/user-doc/annotation/" title="Model Annotation" class="md-nav__link">
      Model Annotation
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../ermrest_documentation/user-doc/tuning/" title="Performance Tuning" class="md-nav__link">
      Performance Tuning
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../ermrest_documentation/user-doc/ermrest-registry-purge/" title="ermrest-registry-purge command" class="md-nav__link">
      ermrest-registry-purge command
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../ermrest_documentation/user-doc/ermrest-client-table/" title="System Table `ermrest_client`" class="md-nav__link">
      System Table `ermrest_client`
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../ermrest_documentation/user-doc/history-track/" title="History Tracking for DBAs and Programmers" class="md-nav__link">
      History Tracking for DBAs and Programmers
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-3-3" type="checkbox" id="nav-5-3-3">
    
    <label class="md-nav__link" for="nav-5-3-3">
      ERMrest API and Service Semantics
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="7">
      <label class="md-nav__title" for="nav-5-3-3">
        ERMrest API and Service Semantics
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../ermrest_documentation/api-doc/" title="Guide to the ERMrest API" class="md-nav__link">
      Guide to the ERMrest API
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../ermrest_documentation/api-doc/rest-catalog/" title="ERMrest Catalog Operations" class="md-nav__link">
      ERMrest Catalog Operations
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-3-3-3" type="checkbox" id="nav-5-3-3-3">
    
    <label class="md-nav__link" for="nav-5-3-3-3">
      ERMrest Model Guide
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="10">
      <label class="md-nav__title" for="nav-5-3-3-3">
        ERMrest Model Guide
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../ermrest_documentation/api-doc/model/naming/" title="ERMrest Model Resource Naming" class="md-nav__link">
      ERMrest Model Resource Naming
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../ermrest_documentation/api-doc/model/rest/" title="ERMrest Model Operations" class="md-nav__link">
      ERMrest Model Operations
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../ermrest_documentation/api-doc/model/system-columns/" title="ERMrest Standard System Columns" class="md-nav__link">
      ERMrest Standard System Columns
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-3-3-4" type="checkbox" id="nav-5-3-3-4">
    
    <label class="md-nav__link" for="nav-5-3-3-4">
      ERMrest Access Control
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="11">
      <label class="md-nav__title" for="nav-5-3-3-4">
        ERMrest Access Control
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../ermrest_documentation/api-doc/acl/concepts/" title="Access Concepts" class="md-nav__link">
      Access Concepts
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../ermrest_documentation/api-doc/acl/static/" title="Static Model-Based Policies" class="md-nav__link">
      Static Model-Based Policies
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../ermrest_documentation/api-doc/acl/dynamic/" title="Dynamic Data-Dependent Policies" class="md-nav__link">
      Dynamic Data-Dependent Policies
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-3-3-5" type="checkbox" id="nav-5-3-3-5">
    
    <label class="md-nav__link" for="nav-5-3-3-5">
      Client-Specific Rights
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="12">
      <label class="md-nav__title" for="nav-5-3-3-5">
        Client-Specific Rights
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../ermrest_documentation/api-doc/acl/rights/" title="Rights Summaries" class="md-nav__link">
      Rights Summaries
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-3-3-5-2" type="checkbox" id="nav-5-3-3-5-2">
    
    <label class="md-nav__link" for="nav-5-3-3-5-2">
      ERMrest Data Resources
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="14">
      <label class="md-nav__title" for="nav-5-3-3-5-2">
        ERMrest Data Resources
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../ermrest_documentation/api-doc/data/naming/" title="ERMrest Data Resources" class="md-nav__link">
      ERMrest Data Resources
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../ermrest_documentation/api-doc/data/rest/" title="ERMrest Data Operations" class="md-nav__link">
      ERMrest Data Operations
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-3-3-5-3" type="checkbox" id="nav-5-3-3-5-3">
    
    <label class="md-nav__link" for="nav-5-3-3-5-3">
      ERMrest History Management
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="15">
      <label class="md-nav__title" for="nav-5-3-3-5-3">
        ERMrest History Management
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../ermrest_documentation/api-doc/history/naming/" title="ERMrest History Management Resources" class="md-nav__link">
      ERMrest History Management Resources
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../ermrest_documentation/api-doc/history/rest/" title="ERMrest History Management Operations" class="md-nav__link">
      ERMrest History Management Operations
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-4" type="checkbox" id="nav-5-4">
    
    <label class="md-nav__link" for="nav-5-4">
      Hatrac
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="5">
      <label class="md-nav__title" for="nav-5-4">
        Hatrac
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../hatrac_documentation/" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-4-2" type="checkbox" id="nav-5-4-2">
    
    <label class="md-nav__link" for="nav-5-4-2">
      User Docs
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="7">
      <label class="md-nav__title" for="nav-5-4-2">
        User Docs
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../hatrac_documentation/INSTALL/" title="Installing on Red Hat-derived Linux" class="md-nav__link">
      Installing on Red Hat-derived Linux
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../hatrac_documentation/HOWTO/" title="Other HOWTO information" class="md-nav__link">
      Other HOWTO information
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../hatrac_documentation/REST-API/" title="Hatrac API and Service Semantics" class="md-nav__link">
      Hatrac API and Service Semantics
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#datapath" title="DataPath" class="md-nav__link">
    DataPath
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#features" title="Features" class="md-nav__link">
    Features
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#limitations" title="Limitations" class="md-nav__link">
    Limitations
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tutorials" title="Tutorials" class="md-nav__link">
    Tutorials
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ermrest-model-management" title="ERMrest Model Management" class="md-nav__link">
    ERMrest Model Management
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#features_1" title="Features" class="md-nav__link">
    Features
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#limitations_1" title="Limitations" class="md-nav__link">
    Limitations
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#examples" title="Examples" class="md-nav__link">
    Examples
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#add-table-to-schema" title="Add Table to Schema" class="md-nav__link">
    Add Table to Schema
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#add-a-vocabulary-term-table" title="Add a Vocabulary Term Table" class="md-nav__link">
    Add a Vocabulary Term Table
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#add-column-to-table" title="Add Column to Table" class="md-nav__link">
    Add Column to Table
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#remove-a-column-from-a-table" title="Remove a Column from a Table" class="md-nav__link">
    Remove a Column from a Table
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#derivacoreermrest_catalog" title="deriva.core.ermrest_catalog" class="md-nav__link">
    deriva.core.ermrest_catalog
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#catalog-binding" title="Catalog Binding" class="md-nav__link">
    Catalog Binding
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#client-credentials" title="Client Credentials" class="md-nav__link">
    Client Credentials
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#high-level-api-factories" title="High-Level API Factories" class="md-nav__link">
    High-Level API Factories
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#low-level-http-methods" title="Low-Level HTTP Methods" class="md-nav__link">
    Low-Level HTTP Methods
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#http-caching" title="HTTP Caching" class="md-nav__link">
    HTTP Caching
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="python-apis">Python APIs<a class="headerlink" href="#python-apis" title="Permanent link">&para;</a></h1>
<p><code>deriva-py</code> includes Python APIs for interacting with the DERIVA framework.</p>
<p>The APIs include:</p>
<ul>
<li>low-level ERMrest interface (see <code>ErmrestCatalog</code>)</li>
<li>low-level Hatrac interface (see <code>HatracStore</code>)</li>
<li>higher-level ERMrest catalog configuration (see <code>CatalogConfig</code>)</li>
<li>higher-level ERMrest "data path" (see below)</li>
</ul>
<h2 id="datapath">DataPath<a class="headerlink" href="#datapath" title="Permanent link">&para;</a></h2>
<p>The <code>datapath</code> module is an interface for building ERMrest "data paths" and retrieving data from ERMrest catalogs. It
also supports data manipulation (insert, update, delete). In its present form, the module provides a limited 
programmatic interface to ERMrest.</p>
<h3 id="features">Features<a class="headerlink" href="#features" title="Permanent link">&para;</a></h3>
<ul>
<li>Build ERMrest "data path" URLs with a Pythonic interface</li>
<li>Covers the essentials for data retrieval: link tables, filter on attributes, select attributes, alias tables</li>
<li>Retrieve entity sets; all or limited numbers of entities</li>
<li>Convert entity sets to Pandas DataFrames</li>
<li>Insert and update entities of a table</li>
<li>Delete entities identified by a (potentially, complex) data path</li>
</ul>
<h3 id="limitations">Limitations<a class="headerlink" href="#limitations" title="Permanent link">&para;</a></h3>
<ul>
<li>Only supports <code>entity</code> and <code>attribute</code> resources</li>
<li>Only supports <code>application/json</code> CONTENT-TYPE (i.e., protocol could be made more efficient)</li>
<li>The <code>EntitySet</code> interface is a thin wrapper over a dictionary of a list of results</li>
<li>Many user errors are caught by Python <code>assert</code> statements rather than checking for "invalid paramters" and throwing
  custom <code>Exception</code> objects</li>
</ul>
<h3 id="tutorials">Tutorials<a class="headerlink" href="#tutorials" title="Permanent link">&para;</a></h3>
<p>See the Jupyter Notebook tutorials in the <code>docs/</code> folder.</p>
<ul>
<li><a href="https://github.com/informatics-isi-edu/deriva-py/blob/master/docs/derivapy-datapath-example-1.ipynb">Example 1</a>: basic schema inspection</li>
<li><a href="https://github.com/informatics-isi-edu/deriva-py/blob/master/docs/derivapy-datapath-example-2.ipynb">Example 2</a>: basic data retrieval</li>
<li><a href="https://github.com/informatics-isi-edu/deriva-py/blob/master/docs/derivapy-datapath-example-3.ipynb">Example 3</a>: building simple data paths</li>
<li><a href="https://github.com/informatics-isi-edu/deriva-py/blob/master/docs/derivapy-datapath-example-4.ipynb">Example 4</a>: slightly more advanced topics</li>
<li><a href="https://github.com/informatics-isi-edu/deriva-py/blob/master/docs/derivapy-datapath-update.ipynb">Data Update Example</a>: examples of insert, update, and delete</li>
</ul>
<p>Now, <a href="https://github.com/informatics-isi-edu/deriva-py/blob/master/docs/get-started.ipynb">get started</a>!</p>
<h2 id="ermrest-model-management">ERMrest Model Management<a class="headerlink" href="#ermrest-model-management" title="Permanent link">&para;</a></h2>
<p>The <code>core.ermrest_model</code> module provides an interface for managing the
model (schema definitions) of an ERMrest catalog.  This library
provides an (incomplete) set of helper routines for common model
management idioms.</p>
<p>For some advanced scenarios supported by the server but not yet
supported in this library, a client may need to resort to direct usage
of the low-level <code>deriva.core.ermrest_catalog.ErmrestCatalog</code> HTTP
access layer.</p>
<h3 id="features_1">Features<a class="headerlink" href="#features_1" title="Permanent link">&para;</a></h3>
<ul>
<li>Obtain an object hierarchy mirroring the model of a catalog or catalog snapshot.</li>
<li>Discover names of schemas, tables, and columns as well as definitions where applicable.</li>
<li>Discover names and definitions of key and foreign key constraints.</li>
<li>Discover annotations on catalog and model elements.</li>
<li>Discover policies on catalog and model elements (if sufficiently privileged).</li>
<li>Create model elements</li>
<li>Create new schemas.</li>
<li>Create new tables.</li>
<li>Create new columns on existing tables.</li>
<li>Create new key constraints over existing columns.</li>
<li>Create new foreign key constraints over existing columns and key constraints.</li>
<li>Delete model elements</li>
<li>Drop schemas.</li>
<li>Drop tables.</li>
<li>Drop columns.</li>
<li>Drop key constraints.</li>
<li>Drop foreign key constraints.</li>
</ul>
<h3 id="limitations_1">Limitations<a class="headerlink" href="#limitations_1" title="Permanent link">&para;</a></h3>
<p>Because the model management interface mirrors a complex remote
catalog model with a hierarchy of local objects, it is possible for
the local objects to get out of synchronization with the remote
catalog and either represent model elements which no longer exist or
lack model elements recently added.</p>
<p>The provided management methods, when used carefully, can
incrementally update the local representation with changes made to the
server by the calling client. However, if other clients make
concurrent changes, it is likely that the local representation will
diverge.</p>
<p>The only robust solution to this problem is for the caller to discard
its model representation, reconstruct it to match the latest server
state, and retry whatever changes are intended.</p>
<h3 id="examples">Examples<a class="headerlink" href="#examples" title="Permanent link">&para;</a></h3>
<p>For the following examples, we assume this common setup:</p>
<pre><code>from deriva.core import ErmrestCatalog
import deriva.core.ermrest_model as em
from deriva.core.ermrest_model import builtin_types as typ


catalog = ErmrestCatalog(...)
model_root = catalog.getCatalogModel()
</code></pre>
<p>Also, when examples show keyword arguments, they illustrate a typical
override value. If omitted, a default value will apply. Many parts of
the model definition are immutable once set, but in general <code>comment</code>,
<code>acl</code>, <code>acl_binding</code>, and <code>annotation</code> attributes can be modified after
the fact through configuration management APIs.</p>
<h4 id="add-table-to-schema">Add Table to Schema<a class="headerlink" href="#add-table-to-schema" title="Permanent link">&para;</a></h4>
<p>To create a new table, you build a table definition document and pass
it to the table-creation method on the object representing an existing
schema. The various classes involved include class-methods
<code>define(...)</code> to construct the constituent parts of the table
definition:</p>
<pre><code>column_defs = [ 
  em.Column.define("Col1", typ.text), 
  em.Column.define("Col2", typ.int8),
]
key_defs = [
  em.Key.define(
    ["Col1"], # this is a list to allow for compound keys
    constraint_names=[ [schema_name, "My New Table_Col1_key"] ],
    comment="Col1 text values must be distinct.",
    annotations={},
  )
]
fkey_defs = [
  em.ForeignKey.define(
    ["Col2"], # this is a list to allow for compound foreign keys
    "Foreign Schema",
    "Referenced Table",
    ["Referenced Column"], # this is a list to allow for compound keys
    on_update='CASCADE',
    on_delete='SET NULL',
    constraint_names=[ [schema_name, "My New Table_Col2_fkey"] ],
    comment="Col2 must be a valid reference value from the domain table.",
    acls={},
    acl_bindings={},
    annotations={},
  )
]
table_def = em.Table.define(
  "My New Table",
  column_defs,
  key_defs=key_defs,
  fkey_defs=fkey_defs,
  comment="My new entity type.",
  acls={},
  acl_bindings={},
  annotations={},
  provide_system=True,
)
schema = model_root.schemas[schema_name]
new_table = schema.create_table(catalog, table_def)
</code></pre>
<p>By default, <code>create_table(...)</code> will add system columns to the table
definition, so the caller does not need to reconstruct these standard elements
of the column definitions nor the <code>RID</code> key definition.</p>
<h4 id="add-a-vocabulary-term-table">Add a Vocabulary Term Table<a class="headerlink" href="#add-a-vocabulary-term-table" title="Permanent link">&para;</a></h4>
<p>A vocabulary term table is often useful to track a controlled
vocabulary used as a domain table for foreign key values used in
science data columns.  A simple vocabulary term table can be
created with a helper function:</p>
<pre><code>schema = model_root.schemas[schema_name]
new_vocab_table = schema.create_table(catalog,
  Table.define_vocabulary(
    "My Vocabulary",
    "MYPROJECT:{RID}",
    "https://server.example.org/id/{RID}"
  )
)
</code></pre>
<p>The <code>Table.define_vocabular()</code> method is a convenience wrapper around
<code>Table.define()</code> to automatically generate core vocabulary table
structures. It accepts other table definition parameters which a
sophisticated caller can use to override or extend these core
structures.</p>
<h4 id="add-column-to-table">Add Column to Table<a class="headerlink" href="#add-column-to-table" title="Permanent link">&para;</a></h4>
<p>To create a new column, you build a column definition document and
pass it to the column-creation method on the object representing an
existing table.</p>
<pre><code>column_def = em.Column.define(
  "My New Column",
  typ.text,
  nullok=False,
  comment="A string representing my new stuff.",
  annotations={},
  acls={},
  acl_bindings={},
)
table = model_root.table(schema_name, table_name)
new_column = table.create_column(catalog, column_def)
</code></pre>
<p>The same pattern can be used to add a key or foreign key to an
existing table via <code>table.create_key(catalog, key_def)</code> or
<code>table.create_fkey(catalog, fkey_def)</code>, respectively. Similarly, a
schema can be added to a model with <code>model.create_schema(catalog,
schema_def)</code>.</p>
<h4 id="remove-a-column-from-a-table">Remove a Column from a Table<a class="headerlink" href="#remove-a-column-from-a-table" title="Permanent link">&para;</a></h4>
<p>To delete a column, you invoke the <code>delete()</code> method on the
column object itself:</p>
<pre><code>table = model_root.table(schema_name, table_name)
column = table.column_definitions[column_name]
column.delete(catalog, table=table)
</code></pre>
<p>The optional <code>table</code> argument allows the method to prune the stale
object from the table object to reflect the change made on
the server. If this is omitted, the server change will be made but the
local table object will fall out of synchronization.</p>
<p>The same pattern can be used to remove a key or foreign key from a
table via <code>key.delete(catalog, table)</code> or <code>foreign_key.delete(catalog,
table)</code>, respectively. Similarly, a schema or table can be removed
with <code>schema.delete(catalog, model)</code> or <code>table.delete(catalog,
schema)</code>, respectively.</p>
<h2 id="derivacoreermrest_catalog">deriva.core.ermrest_catalog<a class="headerlink" href="#derivacoreermrest_catalog" title="Permanent link">&para;</a></h2>
<p>The <code>deriva.core.ermrest_catalog.ErmrestCatalog</code> class provides HTTP
bindings to an ERMrest catalog as a thin wrapper around the Python
Requests library.  Likewise, the
<code>deriva.core.ermrest_catalog.ErmrestSnapshot</code> class provides HTTP
bindings to an ERMrest catalog snapshot. While catalogs permit
mutation of stored content, a snapshot is mostly read-only and only
permits retrieval of content representing the state of the catalog at
a specific time in the past.</p>
<p>Instances of <code>ErmrestCatalog</code> or <code>ErmrestSnapshot</code> represent a
particular remote catalog or catalog snapshot, respectively. They
allow the client to perform HTTP requests against individual ERMrest
resources, but require clients to know how to formulate those
requests in terms of URL paths and resource representations.</p>
<p>Other, higher-level client APIs are layered on top of this implementation
class and exposed via factory-like methods integrated into each catalog
instance.</p>
<h3 id="catalog-binding">Catalog Binding<a class="headerlink" href="#catalog-binding" title="Permanent link">&para;</a></h3>
<p>A catalog is bound using the class constructor, given parameters
necessary for binding:</p>
<pre><code>from deriva.core.ermrest_catalog import ErmrestCatalog
from deriva.core import get_credential

scheme = "https"
server = "myserver.example.com"
catalog_id = "1"
credentials = get_credential(server)

catalog = ErmrestCatalog(scheme, server, catalog_id, credentials=credentials)
</code></pre>
<h3 id="client-credentials">Client Credentials<a class="headerlink" href="#client-credentials" title="Permanent link">&para;</a></h3>
<p>In the preceding example, a credential is obtained from the filesystem
assuming that the user has activated the <code>deriva-auth</code> authentication
agent prior to executing this code. For catalogs allowing anonymous
access, the optional <code>credentials</code> parameter can be omitted to
establish an anonymous binding.</p>
<p>The same client credentials (or anonymous access) is applied to all
HTTP operations performed by the subsequent calls to the catalog
object's methods. If a calling program wishes to perform a mixture of
requests with different credentials, they should create multiple
catalog objects and choose the appropriate object for each request
scenario.</p>
<h3 id="high-level-api-factories">High-Level API Factories<a class="headerlink" href="#high-level-api-factories" title="Permanent link">&para;</a></h3>
<p>Several optional access APIs are layered on top of <code>ErmrestCatalog</code>
and/or <code>ErmrestSnapshot</code> and may be accessed by invoking convenient
factory methods on a catalog or snapshot object:</p>
<ul>
<li><code>catalog_snapshot = catalog.latest_snapshot()</code></li>
<li><code>ErmrestSnapshot</code> binding for latest known revision of catalog</li>
<li><code>path_builder = catalog.getPathBuilder()</code></li>
<li><code>deriva.core.datapath.Catalog</code> path builder for catalog (or snapshot)</li>
<li>Allows higher-level data access idioms as described previously.</li>
<li><code>config_root = catalog.getCatalogConfig()</code></li>
<li><code>deriva.core.ermrest_config.CatalogConfig</code> object for catalog (or snapshot)</li>
<li>The <code>config_root</code> object roots a tree of objects isomorphic to the catalog model, organizing configuration data according to each part of the model.</li>
<li>Allows inspection of catalog/snapshot annotations and policies.</li>
<li>Allows mutation to draft a new configuration objective.</li>
<li>Draft changes are applied with <code>catalog.applyCatalogConfig(config_root)</code></li>
<li><code>model_root = catalog.getCatalogModel()</code></li>
<li><code>deriva.core.ermrest_model.Model</code> object for catalog (or snapshot)</li>
<li>The <code>model_root</code> object roots a tree of objects isomorphic to the catalog model, organizing model definitions according to each part of the model.</li>
<li>Allows inspection of catalog/snapshot models (schemas, tables, columns, constraints)</li>
<li>Some model management idioms are exposed as methods on individual objects in the model hierarchy.</li>
</ul>
<h3 id="low-level-http-methods">Low-Level HTTP Methods<a class="headerlink" href="#low-level-http-methods" title="Permanent link">&para;</a></h3>
<p>When the client understands the URL structuring conventions of
ERMrest, they can use basic Python Requests idioms on a catalog
instance:</p>
<ul>
<li>resp = catalog.get(path)</li>
<li>resp = catalog.delete(path)</li>
<li>resp = catalog.put(path, json=data)</li>
<li>resp = catalog.post(path, json=data)</li>
</ul>
<p>Unlike Python Requests, the <code>path</code> argument to each of these methods
should exclude the static prefix of the catalog itself. For example,
assuming <code>catalog</code> has been bound to
<code>https://myserver.example.com/ermrest/catalog/1</code> as in the constructor
example above, an attempt to access table content at
<code>https://myserver.example.com/ermrest/catalog/1/entity/MyTable</code> would
call <code>catalog.get(</code>/entity/MyTable`) and the catalog binding would
prepend the complete catalog prefix.</p>
<p>The <code>json</code> input to the <code>catalog.put</code> and <code>catalog.post</code> methods
behaves just as in Python Requests. The data is supplied as native
Python lists, dictionaries, numbers, strings, and booleans. The method
implicitly serializes the data to JSON format and sets the appropriate
Content-Type header to inform the server we are sending JSON content.</p>
<p>All of these HTTP methods return a <code>requests.Response</code> object which
must be further interrogated to determine request status or to
retrieve any content produced by the server:</p>
<ul>
<li>resp.status_code: the HTTP response status code</li>
<li>resp.raise_for_status(): raise a Python exception for non-success codes</li>
<li>resp.json(): deserialize JSON content from server response</li>
<li>resp.headers: a dictionary of HTTP headers from the server response</li>
</ul>
<p>Low-level usage errors may raise exceptions directly from the HTTP
methods. However, normal server-indicated errors will produce a
response object and the caller must interrogate the <code>status_code</code>
field or use the <code>raise_for_status()</code> helper to determine whether the
request was successful.</p>
<h3 id="http-caching">HTTP Caching<a class="headerlink" href="#http-caching" title="Permanent link">&para;</a></h3>
<p>By default, the catalog binding uses HTTP caching for the
<code>catalog.get</code> method: it will store previous responses, include
appropriate <code>If-None-Match</code> headers in the new HTTP GET request,
detect <code>304 Not Modified</code> responses indicating that cached content is
valid, and return the cached content to the caller. This mechanism can
be disabled by specifying <code>caching=False</code> in the ErmrestCatalog
constructor call.</p>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../deriva-annotation-config/" title="Configure annotations (deriva-annotation-config)" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Configure annotations (deriva-annotation-config)
              </span>
            </div>
          </a>
        
        
          <a href="../" title="Introduction" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Introduction
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2018 <a href="http://deriva.isi.edu">DERIVA</a>.
          </div>
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      <div class="md-footer-logo">
        <img src="/images/deriva-h50-simple.png">
      </div>
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.a59e2a89.js"></script>
      
      <script>app.initialize({version:"0.17.4",url:{base:"../.."}})</script>
      
    
    
      
    
  </body>
</html>